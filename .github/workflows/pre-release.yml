name: Pre-release

on:
  release:
    types: [prereleased]
  # Allows you to run this workflow manually from the Actions tab
  # workflow_dispatch:

jobs:

  polite-module:

    name: Polite Module
    runs-on: ubuntu-latest
    env:
      GITHUB_TOKEN: ${{ secrets.TOKEN }}

    steps:
      - name: Checkout Repo
        uses: actions/checkout@v2
        with:
          repository: christianwong/${{ secrets.REPO_POLITE }}
          ref: main
          token: ${{ secrets.TOKEN }}
      - name: Create Release
        run: |
          gh release create --prerelease ${{ github.event.release.tag_name }} --notes "Created from GitHub Actions." --title "New Pre-release"


  alfredus-module:

    name: Alfredus Module
    runs-on: ubuntu-latest
    env:
      GITHUB_TOKEN: ${{ secrets.TOKEN }}

    steps:
      - name: Checkout Repo
        uses: actions/checkout@v2
        with:
          repository: christianwong/${{ secrets.REPO_ALFREDUS }}
          ref: main
          token: ${{ secrets.TOKEN }}
      - name: Create Release
        run: |
          gh release create --prerelease ${{ github.event.release.tag_name }} --notes "Created from GitHub Actions." --title "New Pre-release"


  delivery-module:

    name: Delivery Module
    runs-on: ubuntu-latest
    env:
      GITHUB_TOKEN: ${{ secrets.TOKEN }}

    steps:
      - name: Checkout Repo
        uses: actions/checkout@v2
        with:
          repository: christianwong/${{ secrets.REPO_DELIVERY }}
          ref: main
          token: ${{ secrets.TOKEN }}
      - name: Create Release
        run: |
          gh release create --prerelease ${{ github.event.release.tag_name }} --notes "Created from GitHub Actions." --title "New Pre-release"

